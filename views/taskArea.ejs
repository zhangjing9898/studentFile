<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>taskArea</title>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/taskArea.css"/>
    <script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script src="/js/underscore-noflect.js"></script>
</head>

<body>
<% include header.ejs %>
<div class="container">
    <div class="task-area">
        <div class="message-area">
            <ol class="breadcrumb">
                <li>
                    <a href="#">当前位置：</a>
                </li>
                <li>
                    <a href="/">主页</a>
                </li>
                <li class="active">
                    <a href="#">课程查询</a>
                </li>
            </ol>
        </div>
        <hr class="divider task-divider"/>
        <!--<div class="lesson-area">-->
        <!--<h3>课程查询</h3>-->
        <!--<table style="width: 100%" border=1 align=center   cellpadding=0 cellspacing=0 bordercolor=black>-->
        <!--<tr>-->
        <!--<td colspan=2  align="center">时间</td>-->
        <!--<td align="center">星期一</td>-->
        <!--<td align="center">星期二</td>-->
        <!--<td align="center">星期三</td>-->
        <!--<td align="center">星期四</td>-->
        <!--<td align="center">星期五</td>-->
        <!--</tr>-->
        <!--<tr>-->
        <!--<td colspan=2 align=center>早晨</td><td align=center>晨读</td><td align=center>晨读 </td><td align=center>晨读 </td><td align=center> 晨读</td><td align=center> 晨读</td>-->
        <!--</tr>-->
        <!--<tr>-->
        <!--<td  rowspan=4  align=center>上午</td>-->
        <!--<td  >第<br>1<br>节</td>-->
        <!--<td rowspan=2 align=center>WEB应用开发技术<br>周一第1,2节{第1-16周}-->
        <!--<br>熊俊涛(熊俊涛)<br>3502</td>-->
        <!--<td rowspan=2 align=center>线性代数<br>周二第1,2节{第1-8周}<br>赵立新<br>3202</td>-->
        <!--<td rowspan=2 align=center>Internet与Intranet技术<br>周三第1,2节{第1-12周}<br>张建桃<br>3401</td>-->
        <!--<td rowspan=2 align=center>管理统计学<br>周四第1,2节{第1-16周}<br>张建桃(张建桃)<br>3301</td>-->
        <!--<td ></td>-->
        <!--</tr>-->
        <!--<tr>-->
        <!--<td>第<br>2<br>节</td>-->
        <!--<td ></td>-->
        <!--<tr>-->
        <!--<td >第<br>3<br>节</td>-->
        <!--<td rowspan=2 align=center>WEB应用开发技术<br>周一第3,4节{第9-16周}-->
        <!--<br>熊俊涛(熊俊涛)</td>-->
        <!--<td rowspan=2 align=center>职业素养提升与就业指导<br>周二第3,4节{第2-15周}<br>刘月秀<br>3312</td>-->
        <!--<td rowspan=2 align=center>太极拳与乒乓球<br>周三第3,4节{第1-16周}<br>王常青<br>公寓8栋乒</td>-->
        <!--<td rowspan=2 align=center>线性代数</td>-->
        <!--<td ></td>-->
        <!--<tr>-->
        <!--<td >第<br>4<br>节</td>-->
        <!--<td ></td>-->
        <!--<tr>-->
        <!--<td  rowspan=6 align=center>下午</td>-->
        <!--<td >第<br>5<br>节</td>-->
        <!--<td ></td><td ></td><td></td><td></td><td></td>-->
        <!--</tr>-->
        <!--<td  >第<br>6<br>节</td>-->
        <!--<td ></td><td ></td><td></td><td></td><td></td>-->
        <!--</tr>-->
        <!--<td >第<br>7<br>节</td>-->
        <!--<td rowspan=2 align=center>马克思主义基本原理<br>周一第7,8节{第1-18周}<br>陈雷<br>3402</td>-->
        <!--<td rowspan=2 align=center>企业网组网实验<br>周二第7,8节{第1-16周}<br>韩方珍/张建桃</td>-->
        <!--<td rowspan=2 align=center>企业管理<br>周三第7,8节{第3-18周}-->
        <!--<br>刘伟章<br>3405</td>-->
        <!--<td rowspan=2 align=center>大学英语<br>周四第7,8节{第1-15周}<br>陈琳慧<br>DS523</td>-->
        <!--<td ></td>-->
        <!--</tr>-->
        <!--<tr>-->
        <!--<td >第<br>8<br>节</td>-->
        <!--<td ></td>-->
        <!--</tr>-->
        <!--<tr>-->
        <!--</tr>-->
        <!--<tr>-->
        <!--</tr>-->
        <!--<tr>-->
        <!--<td rowspan=3  align=center>晚上</td>-->
        <!--<td >第<br>9<br>节</td>-->
        <!--<td></td>-->
        <!--<td rowspan=2 align=center>管理统计学<br>周二第9,10节{第6-9周}<br>张建桃(张建桃)</td><td></td><td></td>-->
        <!--<td rowspan=2 align=center>大学英语<br>周五第9,10节{第1-15周}<br>陈琳慧<br>3601</td>-->
        <!--</tr>-->
        <!--<tr>-->
        <!--<td >第<br>10<br>节</td>-->
        <!--<td ></td><td ></td><td></td>-->
        <!--</tr>-->
        <!--<tr>-->
        <!--</tr>-->
        <!--</table>-->
        <!--</div>-->
        <div class="history-task-record">
            <p class="title">课表下载:</p>
            <table class="table table-hover" id="tableAll">
                <tr>
                    <th>课表编号</th>
                    <th>课表标题</th>
                    <th>课表形式</th>
                    <th>上传时间</th>
                    <th>截止日期</th>
                    <th>下载人数</th>
                    <th>所属类别</th>
                    <th>操作</th>
                </tr>
            </table>
            <nav aria-label="..." class="text-right">
                <ul class="pagination">
                    <li class="disabled">
                        <a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
                    </li>
                    <li class="active">
                        <a href="#">1 <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="disabled">
                        <a href="#">2 <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="disabled">
                        <a href="#">3<span class="sr-only">(current)</span></a>
                    </li>
                    <li class="disabled">
                        <a href="#">4 <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="disabled">
                        <a href="#">5<span class="sr-only">(current)</span></a>
                    </li>
                    <li class="disabled">
                        <a href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        <hr class="divider task-divider"/>
        <div class="container summary">
            <footer>
                <p class="pull-right">
                    <a href="#top">回到顶部</a>
                </p>
                <p class="pull-left">&copy; 学生档案管理系统</p>
            </footer>
        </div>
    </div>
</div>

</body>
<!--前端模板-->
<script type="text/template" id="resourceTable">
    <tr>
        <td>{{=dataNum}}</td>
        <td>{{=dataTitle}}</td>
        <td>{{=dataForm}}</td>
        <td>{{=upDate}}</td>
        <td>{{=endDate}}</td>
        <td>{{=downloadNum}}</td>
        <td>{{=category}}</td>
        <td>
            <a href="{{=optionPath}}">{{=option}}</a>
        </td>
    </tr>
</script>

<script type="text/javascript">
    var $tableAll = $("#tableAll");
    //得到模板函数
    var compiled = _.template($("#resourceTable").html());

    //ajax服务，获取信息
    $.ajax({
        "url": "/showLessonTable",
        "type": "get",
        "success": function (result) {
            //result是一个数组
//                console.log(Array.isArray(result));
//				console.log(result);
            iterator(0);
            //迭代器
            //这里防止ajax异步，必须使用迭代器
            function iterator(i) {
                if (i == result.length) {
                    //在这里书写请求完毕之后做的事情
                    return;  //不用继续迭代了
                }
                console.log(result[i]);
                //组装模板
                var htmlstring = compiled(result[i]);
                //添加DOM
                $("#tableAll").append($(htmlstring));
                iterator(i + 1);
            }
        }
    })
        </script>
        </body>
</html>